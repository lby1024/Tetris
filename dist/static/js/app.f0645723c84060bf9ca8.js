webpackJsonp([1],{"0Hw8":function(t,n){},"991W":function(t,n){},NHnr:function(t,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e=i("7+uW"),s=i("lHA8"),c=i.n(s),r=i("Gu7T"),o=i.n(r),u=i("mvHQ"),h=i.n(u);function a(t,n){return t instanceof Array?t.map(function(t,i){return t instanceof Array?t.map(function(t,e){return n(t,e,i)}):console.error("数组维度低于二")}):console.error("请输入维度至少为二的数组")}var l=i("Zrlr"),A=i.n(l),m=i("wxAW"),f=i.n(m),g=[[1,1],[1,1]],v=[[0,1,0,0],[0,1,0,0],[0,1,0,0],[0,1,0,0]],C=[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]],p=[[[[0,1,0],[0,1,0],[0,1,1]],[[0,0,0],[1,1,1],[1,0,0]],[[1,1,0],[0,1,0],[0,1,0]],[[0,0,1],[1,1,1],[0,0,0]]],[[[1,1,1],[0,1,0],[0,0,0]],[[0,0,1],[0,1,1],[0,0,1]],[[0,0,0],[0,1,0],[1,1,1]],[[1,0,0],[1,1,0],[1,0,0]]],[[[1,1,0],[0,1,1],[0,0,0]],[[0,0,1],[0,1,1],[0,1,0]],[[0,1,1],[1,1,0],[0,0,0]],[[0,1,0],[0,1,1],[0,0,1]]],[v,C,v,C],[g,g,g,g]],d=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],Q=function(){function t(){A()(this,t),this.x=4,this.y=0,this.speed=3.9,this.num=parseInt(4*Math.random()),this.number=0,this.matrix=p[this.num][this.number]}return f()(t,[{key:"get_xy",value:function(t,n,i){return a(i,function(i,e,s){return{x:e+t,y:s+n,number:i}})}},{key:"get_err_cells",value:function(t,n,i,e){var s=[];return a(i=this.get_xy(t,n,i),function(t){var n=t.number,i=t.x,c=t.y;1===n&&(i<0||i>9||c<0||c>19||2===e[c][i])&&s.push(t)}),s}},{key:"can_right",value:function(t,n){var i=this.x+1,e=this.y;return 0===this.get_err_cells(i,e,n,t).length}},{key:"right",value:function(t,n){this.can_right(t,n)&&(this.x+=1)}},{key:"can_left",value:function(t,n){var i=this.x-1,e=this.y;return 0===this.get_err_cells(i,e,n,t).length}},{key:"left",value:function(t,n){this.can_left(t,n)&&(this.x-=1)}},{key:"can_down",value:function(t,n){var i=this.x,e=this.y+1;return 0===this.get_err_cells(i,e,n,t).length}},{key:"down",value:function(t,n){this.can_down(t,n)&&(this.y+=1)}},{key:"can_turn",value:function(t){var n=this.num,i=this.number,e=this.x,s=this.y;++i>3&&(i=0);var c=p[n][i],r=this.get_err_cells(e,s,c,t);return 0===r.length?"没有不合格的cell":this.find_reason(r)}},{key:"turn",value:function(t){var n=this.num,i=this.number,e=this.can_turn(t);"没有不合格的cell"===e?((i+=1)>3&&(i=0),this.number=i,this.matrix=p[n][i]):"撞到左边墙了"===e?((i+=1)>3&&(i=0),this.number=i,this.matrix=p[n][i],this.x+=1):"撞到右边墙了"===e?((i+=1)>3&&(i=0),this.number=i,this.matrix=p[n][i],3===this.matrix.length&&(this.x-=1),4===this.matrix.length&&(this.x-=2)):"撞到数字2了"===e?console.log(e):"既撞到墙了,又碰到数字2了"===e&&console.log(e)}},{key:"find_reason",value:function(t){var n=[];return t.map(function(t){t.x<0?n.push("撞到左边墙了"):t.x>9?n.push("撞到右边墙了"):n.push("撞到数字2了")}),2===(n=[].concat(o()(new c.a(n)))).length?"既撞到墙了,又碰到数字2了":n[0]}},{key:"right_now",value:function(t,n){}}]),t}(),I={props:["scence"],mounted:function(){this.init()},data:function(){return{score:0,map:d,cur_block:null,count:0,fill_speed:2}},computed:{},methods:{class_cell:function(t){return 0===t?"cell cell00":1===t?"cell cell01":2===t?"cell cell01":void 0},init:function(t){1===t&&this.init01(),2===t&&this.init02(),3===t&&this.init03()},init01:function(){},init02:function(){this.score=0,this.map=d,this.cur_block=new Q,this.updata()},init03:function(){this.count=0},fall:function(){this.count+=this.cur_block.speed,this.count>200&&(this.down(),this.count=0)},clone:function(t){return JSON.parse(h()(t))},clear:function(){var t=this.clone(this.map);t=a(t,function(t){return 1===t?0:t}),this.map=this.clone(t)},updata:function(){var t=this.clone(this.map),n=this.cur_block,i=n.x,e=n.y,s=n.matrix;a(s=this.cur_block.get_xy(i,e,s),function(n){var i=n.number,e=n.x,s=n.y;1===i&&(t[s][e]=1)}),this.map=this.clone(t)},put_into:function(){var t=this.clone(this.map),n=this.cur_block,i=n.x,e=n.y,s=n.matrix;a(s=this.cur_block.get_xy(i,e,s),function(n){var i=n.number,e=n.x,s=n.y;1===i&&(t[s][e]=2)}),this.map=this.clone(t)},left:function(){var t=this.clone(this.map),n=this.cur_block.matrix;this.clear(),this.cur_block.left(t,n),this.updata()},right:function(){var t=this.map,n=this.cur_block.matrix;this.clear(),this.cur_block.right(t,n),this.updata()},down:function(){var t=this.map,n=this.cur_block.matrix;this.clear(),this.cur_block.can_down(t,n)?(this.cur_block.down(t,n),this.updata()):0===this.cur_block.y?(this.put_into(),this.$emit("change",3)):(this.put_into(),this.check(),this.cur_block=new Q,this.updata())},turn:function(){var t=this.map;this.clear(),this.cur_block.turn(t),this.updata()},right_now:function(){this.cur_block.speed=200},check:function(){var t=this,n=this.clone(this.map);n.forEach(function(i,e){1===(i=[].concat(o()(new c.a(i)))).length&&2===i[0]&&(n.splice(e,1),n.unshift([0,0,0,0,0,0,0,0,0,0]),t.score+=1)}),this.map=this.clone(n)},fill:function(){if(this.count+=this.fill_speed,!(this.count<10)){for(var t=this.clone(this.map),n=t.length-1;n>=0;n--){if(2===[].concat(o()(new c.a(t[n]))).length){t.splice(n,1,[2,2,2,2,2,2,2,2,2,2]);break}}this.map=t,this.count=0}}}},E={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{attrs:{id:"wall"}},[2===t.scence||3===t.scence?i("span",{staticClass:"score"},[t._v("\r\n        "+t._s(t.score))]):t._e(),t._v(" "),t._l(t.map,function(n,e){return i("div",{key:e,staticClass:"row"},t._l(n,function(n,e){return i("div",{key:e,class:t.class_cell(n)},[i("span")])}))})],2)},staticRenderFns:[]};var k={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return 1===t.scence||3===t.scence?e("div",{staticClass:"btns"},[e("img",{attrs:{src:i("pNhG"),alt:""},on:{click:t.start}}),t._v(" "),e("div",{class:t.clas},[e("p",[t._v("左移: 手指左滑 or A键")]),t._v(" "),e("p",[t._v("右移: 手指右滑 or D键")]),t._v(" "),e("p",[t._v("旋转: 手指上滑 or W键")]),t._v(" "),e("p",[t._v("加速: 手指下滑 or 空格")])])]):t._e()},staticRenderFns:[]};var B={components:{wall:i("VU/8")(I,E,!1,function(t){i("o8CG")},"data-v-a693b12c",null).exports,btn:i("VU/8")({props:["scence"],computed:{clas:function(){return 1===this.scence?"text":"text mark"}},methods:{start:function(){this.$emit("start")}}},k,!1,function(t){i("mZHa")},"data-v-6df25e9f",null).exports},data:function(){return{scence:1,cur_block:null,is_game_start:!0,x:0,y:0,move_start_x:0,move_start_y:0,move_ing_x:0,move_ing_y:0}},mounted:function(){var t=this;this.init01(),this.loop(),window.addEventListener("keydown",function(n){var i=n.keyCode;65!==i&&37!==i||t.left(),68!==i&&39!==i||t.right(),87!==i&&38!==i||t.turn(),32!==i&&40!==i||t.fall()})},methods:{loop:function(){var t=this,n=function n(){var i=t.scence;1===i&&t.scence01(),2===i&&t.scence02(),3===i&&t.scence03(),t.is_game_start&&(t.timer=window.requestAnimationFrame(n))};this.timer=window.requestAnimationFrame(n)},init01:function(){},scence01:function(){},init02:function(){this.$refs.wall.init(this.scence)},scence02:function(){this.$refs.wall.fall()},init03:function(){this.$refs.wall.init(this.scence)},scence03:function(){this.$refs.wall.fill()},left:function(){2===this.scence&&this.$refs.wall.left()},right:function(){2===this.scence&&this.$refs.wall.right()},down:function(){2===this.scence&&this.$refs.wall.down()},turn:function(){2===this.scence&&this.$refs.wall.turn()},fall:function(){2===this.scence&&this.$refs.wall.right_now()},start:function(){this.scence=2,this.init02()},change_scene:function(t){this.scence=t},touchstart:function(t){this.move_start_x=t.targetTouches[0].clientX,this.move_start_y=t.targetTouches[0].clientY},touchmove:function(t){this.move_ing_x=t.targetTouches[0].clientX,this.move_ing_y=t.targetTouches[0].clientY,this.x=this.move_ing_x-this.move_start_x,this.y=this.move_ing_y-this.move_start_y},touchend:function(t){var n=this.x,i=this.y,e=Math.abs(n),s=Math.abs(i);n>10&&e>s&&this.right(),n<-10&&e>s&&this.left(),i>10&&s>e&&this.fall(),i<-10&&s>e&&this.turn()}}},_={render:function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{attrs:{id:"app"},on:{touchstart:t.touchstart,touchmove:function(n){return n.preventDefault(),t.touchmove(n)},touchend:t.touchend}},[i("wall",{ref:"wall",attrs:{scence:t.scence},on:{change:t.change_scene}}),t._v(" "),i("btn",{attrs:{scence:t.scence},on:{start:t.start}})],1)},staticRenderFns:[]};var b=i("VU/8")(B,_,!1,function(t){i("nCcI")},null,null).exports;i("991W"),i("0Hw8");e.a.config.productionTip=!1,new e.a({el:"#app",render:function(t){return t(b)}})},mZHa:function(t,n){},nCcI:function(t,n){},o8CG:function(t,n){},pNhG:function(t,n){t.exports="data:image/png;base64,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"}},["NHnr"]);
//# sourceMappingURL=app.f0645723c84060bf9ca8.js.map